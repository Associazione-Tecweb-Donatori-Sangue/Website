<!DOCTYPE html>
<html lang="it">
    <head>
        <title>Profilo - ATDS</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="description" content="Pagina per visualizzare il profilo dell'utente dell'Associazione Tecweb Donatori Sangue">
        <meta name="keywords" content="profilo, donatore, associazione, sangue, ATDS">
        <meta name="author" content="ATDS Team">

        <link rel="stylesheet" href="../../css/desktop.css">
        <link rel="stylesheet" href="../../css/mobile.css" media="screen and (max-width:768px)">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Jost&display=swap" rel="stylesheet">
        
        [FAVICON]

        <script src="../../js/script.js"></script>
    </head>

    <body class="page-background">
        [HEADER]

        <div id="title-standard">
            [nomeUtente]
            <h2>Ti diamo il benvenuto nella tua area riservata</h2>
        </div> 

         <main id="content" class="main-standard">
            <div class="dashboard-container">
            <div class="profile-header">
                <button type="button" class="profile-picture [CLASS_DEFAULT]" 
                    aria-label="Modifica foto profilo dell'utente, premere per modificare"
                    id="profile-picture-btn">
                    <img src="[FOTO_PROFILO]" alt="Foto profilo utente" id="profile-img">                        
                    <input type="file" id="photo-upload" name="foto_profilo" accept="image/jpeg,image/png" aria-hidden="true">
                    <span class="remove-photo" id="remove-photo-btn" role="button" tabindex="0" aria-label="Rimuovi foto profilo">&times;</span>
                </button>
                
                    <div class="button-container">
                        <a href="../actions/logout.php" class="btn-std btn-profile"><span lang="en">Logout</span></a>
                        <a href="modifica_account.php" class="btn-std btn-profile">Modifica Utente</a>
                        <button type="button" id="btn-elimina-profilo" class="btn-delete">Elimina Profilo</button>
                    </div>
                </div>
                
                [sezioneDonatore]

                <section class="text-standard">
                    <p>Ti diamo il benvenuto. In questa sezione puoi monitorare le tue attività e gestire le prenotazioni effettuate presso le nostre sedi.</p>
                </section>

                [tabellePrenotazioni]
            </div>
        </main>
        
        <!-- Dialog per conferma rimozione foto profilo -->
        <dialog id="deletePhotoDialog" aria-labelledby="dialogTitle" aria-describedby="dialogDesc" aria-modal="true">
            <div class="dialog-content">
                <h2 id="dialogTitle">Rimozione foto profilo</h2>
                <p id="dialogDesc">Sei sicuro di voler rimuovere la tua foto profilo?</p>

                <div class="dialog-buttons">
                <button type="button" class="btn-delete" id="confirmDeleteBtn">Rimuovi</button>
                <button type="button" class="btn-std" id="cancelDeleteBtn">Annulla</button>
                </div>
            </div>
        </dialog>

        <!-- Dialog per formato file non valido -->
        <dialog id="invalidFormatDialog" role="alertdialog" aria-labelledby="invalidFormatTitle" aria-describedby="invalidFormatDesc" aria-modal="true">
            <div class="dialog-content">
                <h2 id="invalidFormatTitle">Formato non valido</h2>
                <p id="invalidFormatDesc">Sono consentiti solo file <span lang="en">JPG</span> o <span lang="en">PNG</span>.</p>

                <div class="dialog-buttons">
                <button type="button" class="btn-std" id="closeInvalidFormatBtn">Chiudi</button>
                </div>
            </div>
        </dialog>


        <!-- Dialog per conferma eliminazione profilo -->
        <dialog id="dialog-elimina-profilo" aria-labelledby="dialog-title" aria-describedby="dialog-desc" aria-modal="true">
            <div class="dialog-content">
                <h2 id="dialog-title">Conferma eliminazione</h2>
                <p id="dialog-desc">Sei sicuro di voler eliminare il tuo account? Questa azione è irreversibile e comporterà la perdita di tutti i tuoi dati.</p>
                <div class="dialog-buttons">
                    <form action="../actions/cancellaProfilo.php" method="POST" class="dialog-form">
                        <button type="submit" class="btn-delete">Elimina definitivamente</button>
                    </form>
                    <button type="button" id="btn-annulla-elimina" class="btn-std">Annulla</button>
                </div>
            </div>
        </dialog>

        <!-- Dialog per conferma annullamento prenotazione -->
         <dialog id="dialog-annulla-prenotazione" aria-labelledby="dialog-prenotazione-title" aria-describedby="dialog-prenotazione-desc" aria-modal="true">
            <div class="dialog-content">
                <h2 id="dialog-prenotazione-title">Conferma annullamento</h2>
                <p id="dialog-prenotazione-desc">Sei sicuro di voler annullare la prenotazione del <span id="prenotazione-data"></span> alle ore <span id="prenotazione-ora"></span>?</p>
                <div class="dialog-buttons">
                    <form action="../actions/cancellaPrenotazione.php" method="POST" class="dialog-form" id="form-annulla-prenotazione">
                        <input type="hidden" name="id_prenotazione" id="hidden-id-prenotazione" value="">
                        <button type="submit" class="btn-delete">Annulla prenotazione</button>
                    </form>
                    <button type="button" id="btn-annulla-dialog-prenotazione" class="btn-std">Chiudi</button>
                </div>
            </div>
        </dialog>

        <!-- Dialog per file troppo pesante -->
        <dialog id="fileTooLargeDialog" role="alertdialog" aria-labelledby="fileTooLargeTitle" aria-describedby="fileTooLargeDesc" aria-modal="true">
            <div class="dialog-content">
                <h2 id="fileTooLargeTitle"><span lang="en">File</span> troppo grande</h2>
                <p id="fileTooLargeDesc">Il <span lang="en">file</span> selezionato supera la dimensione massima consentita di 5<abbr lang="en" title="Megabyte">MB</abbr>.</p>

                <div class="dialog-buttons">
                    <button type="button" class="btn-std" id="closeFileTooLargeBtn">Chiudi</button>
                </div>
            </div>
        </dialog>

        <!-- Dialog generico per errori upload -->
        <dialog id="uploadErrorDialog" role="alertdialog" aria-labelledby="uploadErrorTitle" aria-describedby="uploadErrorDesc" aria-modal="true">
            <div class="dialog-content">
                <h2 id="uploadErrorTitle">Errore caricamento</h2>
                <p id="uploadErrorDesc">Si è verificato un errore durante il caricamento della foto.</p>

                <div class="dialog-buttons">
                    <button type="button" class="btn-std" id="closeUploadErrorBtn">Chiudi</button>
                </div>
            </div>
        </dialog>

        [FOOTER]
    </body>
</html>
